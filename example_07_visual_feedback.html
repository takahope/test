<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>範例 07：視覺反饋效果</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* 成功掃描動畫 */
        @keyframes scanSuccess {
            0% {
                background-color: rgb(34, 197, 94);
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 20px 10px rgba(34, 197, 94, 0);
            }
            100% {
                background-color: white;
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        /* 錯誤動畫 */
        @keyframes scanError {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        /* 脈衝動畫 */
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* 閃爍動畫 */
        @keyframes blink {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.3; }
        }

        /* 滑入動畫 */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* 淡入動畫 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 彈跳動畫 */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        .scan-success { animation: scanSuccess 0.8s ease-out; }
        .scan-error { animation: scanError 0.5s ease-out; }
        .pulse-animation { animation: pulse 1s infinite; }
        .blink-animation { animation: blink 1s infinite; }
        .slide-in { animation: slideIn 0.5s ease-out; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        .bounce-animation { animation: bounce 1s ease-out; }

        /* 進度條動畫 */
        @keyframes progressBar {
            from { width: 0%; }
            to { width: 100%; }
        }

        .progress-bar-animation {
            animation: progressBar 2s ease-out forwards;
        }

        /* 漣漪效果 */
        .ripple {
            position: relative;
            overflow: hidden;
        }

        .ripple::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            animation: rippleEffect 0.6s ease-out;
        }

        @keyframes rippleEffect {
            to {
                width: 300px;
                height: 300px;
                opacity: 0;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4">

    <div class="max-w-5xl mx-auto bg-white shadow-lg rounded-lg p-6">
        <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">視覺反饋效果展示</h1>

        <!-- 動畫控制面板 -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
            <button onclick="triggerEffect('success')" class="px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
                ✓ 成功掃描
            </button>
            <button onclick="triggerEffect('error')" class="px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                ✗ 錯誤提示
            </button>
            <button onclick="triggerEffect('pulse')" class="px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                ⚡ 脈衝效果
            </button>
            <button onclick="triggerEffect('bounce')" class="px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                ↕ 彈跳效果
            </button>
        </div>

        <!-- 效果展示區 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- 左側：商品列表 -->
            <div>
                <h2 class="text-lg font-semibold text-gray-700 border-b pb-2 mb-4">商品列表（點擊觸發效果）</h2>
                <div id="product-list" class="space-y-2"></div>
            </div>

            <!-- 右側：通知區域 -->
            <div>
                <h2 class="text-lg font-semibold text-gray-700 border-b pb-2 mb-4">通知區域</h2>
                <div id="notification-area" class="space-y-2 h-[400px] overflow-y-auto"></div>
            </div>
        </div>

        <!-- 進度條展示 -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
            <h3 class="text-sm font-semibold text-gray-700 mb-3">進度條效果</h3>
            <button onclick="showProgressBar()" class="mb-3 px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                啟動進度條
            </button>
            <div id="progress-container" class="hidden">
                <div class="bg-gray-200 rounded-full h-4 overflow-hidden">
                    <div id="progress-bar" class="bg-indigo-600 h-full text-xs text-white text-center leading-4"></div>
                </div>
            </div>
        </div>

        <!-- 浮動通知 -->
        <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2" style="max-width: 300px;"></div>
    </div>

    <script>
        // 商品數據
        const products = [
            { id: 1, name: '無線滑鼠', barcode: '123456', price: 500 },
            { id: 2, name: '機械鍵盤', barcode: '234567', price: 2500 },
            { id: 3, name: '顯示器', barcode: '345678', price: 8000 },
            { id: 4, name: '網路攝影機', barcode: '456789', price: 1500 },
            { id: 5, name: 'USB 集線器', barcode: '567890', price: 800 },
        ];

        // 初始化商品列表
        function initProductList() {
            const productList = document.getElementById('product-list');

            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.id = `product-${product.id}`;
                productDiv.className = 'p-4 bg-white border border-gray-200 rounded-lg cursor-pointer hover:shadow-md transition-shadow';
                productDiv.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="font-semibold text-gray-700">${product.name}</div>
                            <div class="text-xs text-gray-500">條碼: ${product.barcode}</div>
                        </div>
                        <div class="text-blue-600 font-bold">NT$ ${product.price}</div>
                    </div>
                `;

                productDiv.addEventListener('click', () => scanProduct(product));
                productList.appendChild(productDiv);
            });
        }

        // 掃描商品
        function scanProduct(product) {
            const productDiv = document.getElementById(`product-${product.id}`);

            // 添加成功動畫
            productDiv.classList.add('scan-success');
            setTimeout(() => {
                productDiv.classList.remove('scan-success');
            }, 800);

            // 添加通知
            addNotification('success', `已掃描：${product.name}`, `條碼：${product.barcode} | 價格：NT$ ${product.price}`);

            // 顯示浮動提示
            showToast('success', `✓ ${product.name} 已加入`, 2000);

            // 滾動到商品
            productDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // 觸發不同效果
        function triggerEffect(type) {
            const productList = document.getElementById('product-list').children;

            switch (type) {
                case 'success':
                    const randomProduct = products[Math.floor(Math.random() * products.length)];
                    scanProduct(randomProduct);
                    break;

                case 'error':
                    Array.from(productList).forEach((item, index) => {
                        setTimeout(() => {
                            item.classList.add('scan-error');
                            setTimeout(() => item.classList.remove('scan-error'), 500);
                        }, index * 100);
                    });
                    addNotification('error', '掃描失敗', '無法識別條碼，請重試');
                    showToast('error', '✗ 掃描失敗', 2000);
                    break;

                case 'pulse':
                    Array.from(productList).forEach((item, index) => {
                        setTimeout(() => {
                            item.classList.add('pulse-animation');
                            setTimeout(() => item.classList.remove('pulse-animation'), 1000);
                        }, index * 200);
                    });
                    addNotification('info', '正在同步', '正在與伺服器同步數據...');
                    break;

                case 'bounce':
                    Array.from(productList).forEach((item, index) => {
                        setTimeout(() => {
                            item.classList.add('bounce-animation');
                            setTimeout(() => item.classList.remove('bounce-animation'), 1000);
                        }, index * 150);
                    });
                    addNotification('warning', '數量更新', '庫存數量已更新');
                    break;
            }
        }

        // 添加通知
        function addNotification(type, title, message) {
            const notificationArea = document.getElementById('notification-area');

            const typeConfig = {
                success: { bg: 'bg-green-50', border: 'border-green-200', icon: '✓', iconColor: 'text-green-600' },
                error: { bg: 'bg-red-50', border: 'border-red-200', icon: '✗', iconColor: 'text-red-600' },
                warning: { bg: 'bg-yellow-50', border: 'border-yellow-200', icon: '⚠', iconColor: 'text-yellow-600' },
                info: { bg: 'bg-blue-50', border: 'border-blue-200', icon: 'ℹ', iconColor: 'text-blue-600' }
            };

            const config = typeConfig[type];
            const notification = document.createElement('div');
            notification.className = `p-3 ${config.bg} border ${config.border} rounded-lg slide-in`;

            const timestamp = new Date().toLocaleTimeString('zh-TW');

            notification.innerHTML = `
                <div class="flex items-start">
                    <span class="${config.iconColor} text-xl mr-3">${config.icon}</span>
                    <div class="flex-1">
                        <div class="font-semibold text-gray-700">${title}</div>
                        <div class="text-sm text-gray-600">${message}</div>
                        <div class="text-xs text-gray-400 mt-1">${timestamp}</div>
                    </div>
                </div>
            `;

            notificationArea.insertBefore(notification, notificationArea.firstChild);

            // 限制通知數量
            while (notificationArea.children.length > 10) {
                notificationArea.removeChild(notificationArea.lastChild);
            }
        }

        // 顯示浮動提示 (Toast)
        function showToast(type, message, duration = 3000) {
            const toastContainer = document.getElementById('toast-container');

            const typeConfig = {
                success: { bg: 'bg-green-600', icon: '✓' },
                error: { bg: 'bg-red-600', icon: '✗' },
                warning: { bg: 'bg-yellow-600', icon: '⚠' },
                info: { bg: 'bg-blue-600', icon: 'ℹ' }
            };

            const config = typeConfig[type];
            const toast = document.createElement('div');
            toast.className = `${config.bg} text-white px-4 py-3 rounded-lg shadow-lg fade-in`;
            toast.innerHTML = `
                <div class="flex items-center">
                    <span class="text-xl mr-2">${config.icon}</span>
                    <span class="font-medium">${message}</span>
                </div>
            `;

            toastContainer.appendChild(toast);

            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateX(100%)';
                toast.style.transition = 'all 0.3s ease-out';
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }

        // 顯示進度條
        function showProgressBar() {
            const container = document.getElementById('progress-container');
            const progressBar = document.getElementById('progress-bar');

            container.classList.remove('hidden');
            progressBar.style.width = '0%';
            progressBar.textContent = '0%';

            let progress = 0;
            const interval = setInterval(() => {
                progress += 2;
                progressBar.style.width = `${progress}%`;
                progressBar.textContent = `${progress}%`;

                if (progress >= 100) {
                    clearInterval(interval);
                    showToast('success', '✓ 處理完成！', 2000);
                    setTimeout(() => {
                        container.classList.add('hidden');
                    }, 1000);
                }
            }, 40);
        }

        // 初始化
        initProductList();

        // 初始通知
        addNotification('info', '系統已啟動', '視覺反饋系統準備就緒');
    </script>

</body>
</html>
